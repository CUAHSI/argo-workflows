metadata:
  generateName: list-data-
  namespace: workflows
spec:
  templates:
    - name: transfer-data-template
      inputs: {}
      outputs: {}
      metadata: {}
      steps:
        - - name: transfer-data
            template: transfer-data
            arguments:
              parameters:
                - name: input-path
                  value: '{{workflow.parameters.input-path}}'
                - name: input-bucket
                  value: '{{workflow.parameters.input-bucket}}'
    - name: transfer-data
      inputs:
        parameters:
          - name: input-path
          - name: input-bucket
        artifacts:
          - name: input-data
            path: /srv/input
            s3:
              endpoint: api.minio.cuahsi.io
              bucket: '{{inputs.parameters.input-bucket}}'
              accessKeySecret:
                name: minio-credentials
                key: accessKey
              secretKeySecret:
                name: minio-credentials
                key: secretKey
              key: '{{inputs.parameters.input-path}}'
      metadata: {}
      container:
        name: ''
        image: cuahsi/parflow-subset-argo:v1
        command:
          - ls
        args:
          - -la
          - /srv/input/nwm.v3.0.10
        resources:
          requests:
            ephemeral-storage: 50Gi
  entrypoint: transfer-data
  arguments:
    parameters:
      - name: input-path
        value: nwm.v3.0.10.gz
      - name: input-bucket
        value: subsetter-static-input

http://api.minio.cuahsi.io/subsetter-static-input/nwm.v3.0.10.gz?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Credential=71CH0E7EI67VM04SBZBJ%2F20240709%2Fus-east-1%2Fs3%2Faws4_request&X-Amz-Date=20240709T144124Z&X-Amz-Expires=604800&X-Amz-Security-Token=eyJhbGciOiJIUzUxMiIsInR5cCI6IkpXVCJ9.eyJhY2Nlc3NLZXkiOiI3MUNIMEU3RUk2N1ZNMDRTQlpCSiIsImFjciI6IjEiLCJhdF9oYXNoIjoidUw0WEZUZlR5OUJ6cmc2UjdHRWVwQSIsImF1ZCI6Im1pbmlvIiwiYXV0aF90aW1lIjoxNzIwNTM1ODY0LCJhenAiOiJtaW5pbyIsImNvdW50cnkiOiJVUyIsImVtYWlsIjoic2JsYWNrQGN1YWhzaS5vcmciLCJlbWFpbF92ZXJpZmllZCI6dHJ1ZSwiZXhwIjoxNzIwNTc5MDY2LCJmYW1pbHlfbmFtZSI6IkJsYWNrIiwiZ2l2ZW5fbmFtZSI6IlNjb3R0IiwiZ3JvdXBzIjoidGVzdC1ncm91cCIsImlhdCI6MTcyMDUzNTg2NiwiaXNzIjoiaHR0cHM6Ly9hdXRoLmN1YWhzaS5pby9yZWFsbXMvQ1VBSFNJIiwianRpIjoiZTg4N2I4MDktY2U3NC00ODE1LTg3NTYtNDlhMzBjNGU2ZDg0IiwibmFtZSI6IlNjb3R0IEJsYWNrIiwib3JnYW5pemF0aW9uIjoiQ1VBSFNJIiwicG9saWN5Ijoic2NyYXRjaHJlYWRvbmx5LHByZWZlcnJlZF91c2VybmFtZSIsInByZWZlcnJlZF91c2VybmFtZSI6InNibGFjayIsInNlc3Npb25fc3RhdGUiOiJkM2YyNjhlZS04YWJkLTQxY2YtOGJkOS1mNjgyNzZmMWI5YWMiLCJzaWQiOiJkM2YyNjhlZS04YWJkLTQxY2YtOGJkOS1mNjgyNzZmMWI5YWMiLCJzdWIiOiI3N2FiODNlZS1mZjQxLTRmZWQtYjQzMS03OTE4OGZmZjExYWEiLCJzdWJqZWN0X2FyZWFzIjoic3ViamVjdDEiLCJ0eXAiOiJJRCIsInVzZXJfdHlwZSI6IkNvbW1lcmNpYWwvUHJvZmVzc2lvbmFsIn0.CWSFlGCV6VeVAeE-c_-DO9g4mM4D-Oi0WJF2O8R-nHhSZXdMPGeCLB11fs1kU_JiH8VNkl_vnqsKM0xxIWW8sQ&X-Amz-SignedHeaders=host&versionId=null&X-Amz-Signature=a62fc457ce5316ec98d14cc88b8441e6be512f7e012347617490fbdf5e3d0fa9